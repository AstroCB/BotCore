<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [login][1]
    -   [login][2]
        -   [Parameters][3]
    -   [dumpLogin][4]
        -   [Parameters][5]
    -   [loadLogin][6]
        -   [Parameters][7]
    -   [logout][8]
        -   [Parameters][9]
    -   [convert][10]
        -   [Parameters][11]
    -   [convertToFile][12]
        -   [Parameters][13]
-   [credentialsObj][14]
    -   [Properties][15]
-   [loginCallback][16]
    -   [Parameters][17]
-   [apiObj][18]
-   [optionsObj][19]
-   [genericErrCb][20]
    -   [Parameters][21]
-   [errDataCb][22]
    -   [Parameters][23]
-   [searchAttribute][24]
    -   [Parameters][25]
-   [monitoring][26]
    -   [monitor][27]
        -   [Parameters][28]
    -   [cancelMonitoring][29]
-   [retryLoginCallback][30]
    -   [Parameters][31]

## login

Login API
Provides various utilities for managing the login process, including
login/logout and import/export of appstate files.

Encapsulates the login by caching the appstate in memory.

### login

Call this to initialize the login module and log into Facebook using
[facebook-chat-api][32].
See examples/ for example usage.

#### Parameters

-   `credentials` **[credentialsObj][33]** 
-   `callback` **[loginCallback][34]** called after login completed (successfully or unsuccessfully)
-   `forceCreds` **[Boolean][35]** if true, forces a login with credentials even if
    appstate exists (optional, default `false`)
-   `options` **[optionsObj][36]** any options you wish to pass to the API on login;
    by default, sets `logLevel` to `error` and `forceLogin` to `true` (auto-approves errors asking
    for approval of recent logins for simplicity) (optional, default `defaultOptions`)

### dumpLogin

Dumps the current login into a specified file.

#### Parameters

-   `filename` **[string][37]** Name of the file specifying where to store the login
-   `callback` **[genericErrCb][38]** Callback to use after writing the file

### loadLogin

Reads a new login into memory from a file.

#### Parameters

-   `filename` **[string][37]** Name of the file specifying where the imported login
    is stored
-   `callback` **[genericErrCb][38]** Callback to use after reading the login

### logout

Logs out of Facebook.

#### Parameters

-   `callback` **[errDataCb][39]** 

### convert

Converts a (NodeJS) facebook-chat-api appstate into a (Python) fbchat
session. See the examples/ directory for how this can be used to create
an fbchat bot with BotCore.

#### Parameters

-   `filename` **[string][37]** Name of the file whose location contains the
    appstate data to be converted
-   `callback` **[errDataCb][39]** Callback to use after conversion completed,
    passed the converted session

### convertToFile

A variant of `convert` that directly outputs the converted session to a file.

#### Parameters

-   `appstate` **[string][37]** Location of appstate to be converted
-   `output` **[string][37]** Where to place the converted session
-   `callback` **[genericErrCb][38]** Callback called after conversion

## credentialsObj

The credentials object is required for logging in to any application using BotCore. The
idea of it is to store your (sensitive) credentials separately from the source of your project, in a
place that won't be accidentally committed to a repo and published for the world to see. It consists
of several required keys that allow BotCore to log in to both Facebook and the MemCachier service
(used to cache logins) on your behalf. The keys are listed and explained below.

> **NOTE**: to obtain the values for the `MEMCACHIER_` variables, you must [sign up for a free
> MemCachier account][40] and create a cache. From there, you
> will be able to retrieve the requisite info from your dashboard.

I recommend the following two methods for storing your credentials object due to their ease of use:

1.  _Environment variables_: you can store these keys as environment variables, which will prevent
    them from being stored in any file in your project. When logging in, simply pass `process.env` as your
    credentials object, because it will contain all of the required keys needed to log in successfully!
    You can find an example of how to configure your credentials this way in `examples/credentials.sh`
    in the BotCore repo.

2.  _A gitignored credentials file_: you can create a file (`credentials.js` or similar) that contains
    all of your required credentials keys as exported variables, and then simply import this as a JS
    module wherever you need to log in. Don't forget to add this credentials file to your `.gitignore`
    so that your credentials aren't exposed! You can find an example of how to configure your credentials
    this way in `examples/credentials.js` in the BotCore repo.

These are two of many possible ways you could choose to store this information. Keep in mind that
regardless of which method you choose, you will have to eventually pass a JavaScript object containing
the following keys to the [login][1] function, so you will need to be able to access this
information at runtime.

Also keep in mind that the `FACEBOOK_EMAIL` and `FACEBOOK_PASSWORD` keys are only required for login
if you do not have an active Facebook login session stored in BotCore (i.e. you have logged in
recently, and Facebook hasn't decided to terminate your session yet). BotCore caches your recent
logins to prevent too many hard (username/password) logins, unless you use the `forceLogin` option.
If you are using several bots with BotCore, consider storing your `FACEBOOK_EMAIL` and
`FACEBOOK_PASSWORD` keys with only one of them, and only using your `MEMCACHIER_` variables to log in
from other bots.

Type: [Object][41]

### Properties

-   `MEMCACHIER_USERNAME` **[string][37]** Memcachier username (from dashboard) for storage
-   `MEMCACHIER_PASSWORD` **[string][37]** Memcachier password (from dashboard) for storage
-   `MEMCACHIER_SERVERS` **[string][37]** Memcachier servers (from dashboard) for storage
-   `FACEBOOK_EMAIL` **[string][37]** Facebook account email for login (optional if already logged in once)
-   `FACEBOOK_PASSWORD` **[string][37]** Facebook account password for login (optional if already logged in once)

## loginCallback

Type: [Function][42]

### Parameters

-   `err` **[string][37]** indicates errors (null if login is successful)
-   `api` **[apiObj][43]** null if login fails, see
    [facebook-chat-api][32] for details

## apiObj

An API instance of the facebook-chat-api (see 
[here][32] for details)

Type: [Object][41]

## optionsObj

An object containing options to be passed to the underlying
facebook-chat-api instance on login (see
[here][44]
for details)

Type: [Object][41]

## genericErrCb

Type: [Function][42]

### Parameters

-   `err` **[string][37]** Message specifying the error (or null if none)

## errDataCb

Type: [Function][42]

### Parameters

-   `err` **[string][37]** Message specifying the error (or null if none)
-   `success` **[Object][41]** Data returned from the successful operation

## searchAttribute

facebook-chat-api appstates are an array of objects containing "key" and
"value" keys and additional properties (that the Python API doesn't use).

This function searches and extracts the value for the given key, discarding
the other information.

### Parameters

-   `data` **[Object][41]** facebook-chat-api appstate
-   `key` **[string][37]** The key to locate

Returns **[string][37]** The value of the key (or null if not found)

## monitoring

Monitoring API

Provides a basic utility for monitoring a running bot process. It is
configurable, with options to notify a maintainer if the bot goes down,
automatically retry logins for stale processes, and restart the bot process
entirely if all else fails.

### monitor

Begins monitoring a specified API instance.

#### Parameters

-   `apiInstance` **[apiObj][43]** An instance of the facebook-chat-api to monitor
-   `maintainerId` **[string][37]** User ID of the maintainer to notify on failures
-   `botName` **[string][37]** Name of the bot running
-   `credentialsObj` **[credentialsObj][33]** Object containing the user credentials
-   `botProcessRef` **[process][45]** Node.js process to monitor (optional)
-   `retryLoginCallback` **[retryLoginCallback][46]** A callback to send a new API
    instance to if login failed and a re-attempted login succeeded (optional –
    omitting this callback is equivalent to disabling the retry login feature)
-   `pingIntervalInMinutes` **[number][47]** The number of minutes between
    checks that the bot is still running (optional, default `10`)

### cancelMonitoring

Cancels the monitoring of the current bot process.

## retryLoginCallback

Type: [Function][42]

### Parameters

-   `api` **[apiObj][43]** A new instance of the facebook-chat-api after a successful login

[1]: #login

[2]: #login-1

[3]: #parameters

[4]: #dumplogin

[5]: #parameters-1

[6]: #loadlogin

[7]: #parameters-2

[8]: #logout

[9]: #parameters-3

[10]: #convert

[11]: #parameters-4

[12]: #converttofile

[13]: #parameters-5

[14]: #credentialsobj

[15]: #properties

[16]: #logincallback

[17]: #parameters-6

[18]: #apiobj

[19]: #optionsobj

[20]: #genericerrcb

[21]: #parameters-7

[22]: #errdatacb

[23]: #parameters-8

[24]: #searchattribute

[25]: #parameters-9

[26]: #monitoring

[27]: #monitor

[28]: #parameters-10

[29]: #cancelmonitoring

[30]: #retrylogincallback

[31]: #parameters-11

[32]: https://github.com/Schmavery/facebook-chat-api

[33]: #credentialsobj

[34]: #logincallback

[35]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[36]: #optionsobj

[37]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[38]: #genericerrcb

[39]: #errdatacb

[40]: https://www.memcachier.com/users/signup

[41]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[42]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[43]: #apiobj

[44]: https://github.com/Schmavery/facebook-chat-api/blob/master/DOCS.md#apisetoptionsoptions

[45]: https://nodejs.org/api/process.html

[46]: #retrylogincallback

[47]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number
